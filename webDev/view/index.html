<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../styles/reset.css">
    <link rel="stylesheet" href="../../styles/topnav.css">
    <link rel="stylesheet" href="../../styles/contact.css">
    <title>View Project</title>
    <style>
        #viewTitle {
            font-size: 20px;
            display: flex;
            margin: 8px 24px;
            align-items: center;
            gap: 8px;
        }

        #viewTitle a {
            align-items: center;
            color: black;
            border-bottom: 1px solid white;
        }

        #viewTitle a:hover {
            border-bottom: 1px solid black;
        }

        #projDetail {
            display: flex;
            margin: 0 24px;
            gap: 8px;
            justify-content: center;
        }

        #detailLeft {
            width: 78%;
            
            max-width: 960px;
            margin-right: 24px;
            
            padding: 8px;
        }

        #carousel {
            width: 100%;
            padding: 0;
            margin-bottom: 8px;
            border-radius: 4px;

            position: relative;
        }

        #carousel img{
            width: 100%;

            
            
            object-fit: cover;
            aspect-ratio: 16 / 9;
        }

        #carousel button {
            position: absolute;
            top: 40%;
            height: 20%;
            border-radius: 8px;
            width: 5%;
            border: 0;

            background-color: black;
            color: white;
            opacity: 50%;
            
        }

        #carousel button:hover {
            opacity: 100%;
        }

        #detailRight {
            width: 20%;
            padding: 8px;
        }

        .prevBtn {
            left: 0;
            margin-left: 4px;
        }

        .nextBtn {
            right: 0;
            margin-right: 4px;
        }

        #feature {
            margin-bottom: 8px;

        }

        #tool {
            margin-bottom: 8px;
            
        }

        #linkBtn {
            display: flex;
            justify-content: center;
        }

        #projLink {
            padding: 4px 24px;
            text-decoration: none;
            text-align: center;
        }

        .allProj {
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            width: 250px;
            margin:0 auto;
            padding: .9em 2em;
            overflow: hidden;
            border: 1px solid rgb(0, 127, 255);
            border-radius: 5px;
            background-color: #fff;
            color: rgb(0, 127, 255);
            font-size: 1em;
        }

        .allProj:hover {
            background-color: transparent;
            color: #fff;
        }

        .allProj::before {
            position: absolute;
            top: 0;
            left: 0;
            z-index: -1;
            width: 0;
            height: 100%;
            background-color: rgb(0, 127, 255);
            content: '';
            transition: width .3s ease;
        }

        .allProj:hover::before {
            width: 100%;
        }

        .allProj a{
            text-decoration: none;
            color: inherit;
        }

        .detailTitle {
            font-size: 1.2rem;
            color: rgb(54, 69, 79);

        }
    </style>
</head>
<body>
    <div id="topNav">
        <div class="navBtn">
            <a href="../../">Home</a>
        </div> 
        <div class="navBtn">
            <a href="../">Web Development</a>
        </div>
        <div class="navBtn navBtn-fill">
            <button onclick="window.open('../../assets/files/Joven_Santos_Resume.pdf', '_blank')">Resume</button>
        </div>
        <div class="navBtn navBtn-fill">
            <button onclick="openContactModal()">Contact Me</button>
        </div>
    </div>

    <div id="viewTitle">
        <a href="../">
        <span id="pageTitle"><!-- 
        Title heerre
        --></span></a>
    </div>

    <div id="projDetail">
        <div id="detailLeft">
            <div id="carousel">
            <!-- 
            Carousell
            -->
            </div>
            <p id="desccription">
            <!-- 
            Desccription
            -->
            </p>
        </div>
        
        <div id="detailRight">
            <span class="detailTitle"><strong>Key Features:</strong></span>
            <div id="feature"></div>
            <span class="detailTitle"><strong>Tools:</strong></span>
            <div id="tool"></div>
            <div id="linkBtn"><a href="" id="projLink" class="allProj">View Live Project</a></div>
        </div>
    </div>

    <div id="blackOverlay">
        <div id="contactModal">
            <span class="contactTitle">Contact Information</span>

            <div class="contactLine">
                <img src="../../assets/email.png" alt="">
                <span>sjovencd@gmail.com</span>
                <button onclick="copyToClipboard(this)"><img src="../../assets/copy.png" alt=""></button>
            </div>

            <div class="contactLine">
                <img src="../../assets/telephone.png" alt="">
                <span>+63 929 343 0291</span>
                <button onclick="copyToClipboard(this)"><img src="../../assets/copy.png" alt=""></button>
            </div>

            <button class="closeBtn" onclick="document.getElementById('blackOverlay').style.display='none'">
                Close
            </button>
        </div>
    </div>

    <div id="toast">Copied!</div>

    <script src="../../scipts/contact.js"></script>
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const itemId = urlParams.get('id');

        function loadProject() {
            fetch('../data.json')
                .then(response => {
                    if (!response.ok) throw new Error('Network error');
                    return response.json();
                })
                .then(projects => {
                    const project = projects.find(p => p.view === itemId);
                    if (project) {
                        populatePage(project);
                    } else {
                        document.getElementById('container').innerHTML = '<p>Project not found</p>';
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    document.getElementById('container').innerHTML = '<p>Error loading project</p>';
                });
        }
        
        function populatePage(project) {
            const titleContainer = document.getElementById('pageTitle');
            const description = document.getElementById('desccription');
            const carousel = document.getElementById('carousel');
            const features = document.getElementById('feature');
            const tools = document.getElementById('tool');
            const live = document.getElementById('projLink');

            titleContainer.textContent = "< " + project.title;
            description.textContent = project.description;

            features.innerHTML = '';
            project.features.forEach(f => {
                const li = document.createElement('li');
                li.textContent = f;
                features.appendChild(li);
            });

            tools.innerHTML = '';
            project.tools.forEach(t => {
                const li = document.createElement('li');
                li.textContent = t;
                tools.appendChild(li);
            });

            live.href = project.live;

            carousel.innerHTML = '';

            let currentIndex = 0;
            const images = project.photoAll.map((path, index) => {
                const img = new Image();
                img.src = `../${path}`;
                img.alt = `${project.title} screenshot ${index+1}`;
                img.style.display = "none";
                carousel.appendChild(img);
                return img;
            });

            if (images.length > 0) {
                images[0].style.display = "block";
            }

            const prevBtn = document.createElement("button");
            prevBtn.textContent = "<";
            prevBtn.className = "prevBtn";
            prevBtn.onclick = () => {
                images[currentIndex].style.display = "none"; 
                currentIndex = (currentIndex - 1 + images.length) % images.length;
                images[currentIndex].style.display = "block"; 
            };

            const nextBtn = document.createElement("button");
            nextBtn.textContent = ">";
            nextBtn.className = "nextBtn";
            nextBtn.onclick = () => {
                images[currentIndex].style.display = "none"; 
                currentIndex = (currentIndex + 1) % images.length;
                images[currentIndex].style.display = "block";
            };

            carousel.appendChild(prevBtn);
            carousel.appendChild(nextBtn);
        }

        document.addEventListener('DOMContentLoaded', () => loadProject());
    </script>
</body>
</html>