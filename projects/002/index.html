<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../styles/reset.css">
    <link rel="stylesheet" href="../../styles/topnav.css">
    <link rel="stylesheet" href="../../styles/contact.css">
    <title>Test Automation Case Study: Weather Tracker App (Playwright E2E)</title>
    <style>
        html {
            scroll-behavior: smooth;
        }
        body {
            padding-bottom: 2rem;
        }
        #hero {
            height: 80vh;
            position: relative; 
            margin-bottom: 8px;
            background-image: url("hero.jpg");
            background-size: cover;
            background-position: center;
        }
        #hero span {
            color: black;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            font-size: 36px;
            position: absolute;
            top: 180px;
            left: 80px;
        }
        .section-title {
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            margin: 32px 0;
        }
        .section-title span {
            border-bottom: 3px solid rgb(0, 127, 255);
        }
        .content p {
            margin: 0 24px 8px;
        }
        table {
            width: 95%;
            border-collapse: collapse;
            margin: 20px 2%;
            background-color: white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: rgb(54, 69, 79);
            color: white;
        }
        tbody tr:nth-child(even) {
            background-color: rgb(54, 69, 79);
            color: white;
        }
        tr:hover {
            background-color: #f1f1f1;
        }
        .list {
            list-style-type: none;
            padding: 0;
            margin: 0 24px;
        }
        .list li {
            margin-bottom: 5px;
        }
        .emoji {
            font-size: 1.2em;
        }
        .allProj {
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            width: 250px;
            margin: 32px auto;
            padding: .9em 2em;
            overflow: hidden;
            border: 1px solid rgb(0, 127, 255);
            border-radius: 5px;
            background-color: #fff;
            color: rgb(0, 127, 255);
            font-size: 1em;
        }
        .allProj:hover {
            background-color: transparent;
            color: #fff;
        }
        .allProj::before {
            position: absolute;
            top: 0;
            left: 0;
            z-index: -1;
            width: 0;
            height: 100%;
            background-color: rgb(0, 127, 255);
            content: '';
            transition: width .3s ease;
        }
        .allProj:hover::before {
            width: 100%;
        }
        .allProj a {
            text-decoration: none;
            color: inherit;
        }
        #toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 14px;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease-in-out;
        }
        #toast.show {
            opacity: 1;
        }

        .white-link {
            color: #6EC6FF;
        }
    </style>
</head>
<body>
    <div id="topNav">
        <div class="navBtn">
            <a href="../../">Home</a>
        </div>
        <div class="navBtn">
            <a href="../">Projects</a>
        </div>
        <div class="navBtn navBtn-fill">
            <button onclick="window.open('../../assets/files/Joven_Santos_Resume.pdf', '_blank')">Resume</button>
        </div>
        <div class="navBtn navBtn-fill">
            <button onclick="openContactModal()">Contact Me</button>
        </div>
    </div>

    <div id="hero">
        <span>Test Automation Case Study: <br>Weather Tracker App (Playwright E2E)</span>
    </div>

    <div class="section-title" id="overview">
        <span>Project Goals & Automation Scope</span>
    </div>
    <div class="content">
        <table>
            <thead>
                <tr>
                    <th>Category</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Application Under Test (AUT)</td>
                    <td>Weather Tracker App (Client-side JavaScript web application).</td>
                </tr>
                <tr>
                    <td>Application Repository</td>
                    <td><a href="https://github.com/sJoven/weather-tracker-app/" target="_blank" rel="noopener noreferrer" class="white-link">Application Repository</a></td>
                </tr>
                <tr>
                    <td>Automation Repository</td>
                    <td><a href="https://github.com/sJoven/weather-tracker-test-playwright/" target="_blank" rel="noopener noreferrer">Automation Test Suite Repository</a></td>
                </tr>
                <tr>
                    <td>Automation Tool</td>
                    <td>Playwright (Node.js framework). Chosen for its fast execution, stability across modern browsers (Chromium, Firefox, WebKit), and superior built-in assertion library.</td>
                </tr>
                <tr>
                    <td>Testing Type</td>
                    <td>End-to-End (E2E) UI Functional Testing. Focused on simulating user flows from application load to final data verification.</td>
                </tr>
                <tr>
                    <td>Key Scopes</td>
                    <td>Page Integrity, Valid/Invalid Search Functionality, Persistence of State (Recent Searches), and User Interaction (Clicking recent buttons).</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="section-title">
        <span>Test Design & Coverage</span>
    </div>
    <div class="content">
        <p>The automation suite was designed to create reliable, repeatable tests that act as a Regression Test Suite to ensure key features remain functional after any future code changes.</p>
        <p><strong>A. Test Case Structure and Focus</strong></p>
        <p>The suite covers the core functionality of the application in five atomic test cases:</p>
        <table>
            <thead>
                <tr>
                    <th>Test Case Name</th>
                    <th>Core Functionality Validated</th>
                    <th>Playwright Methods Demonstrated</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Page loads successfully...</td>
                    <td>Verifies all required UI elements (h1, input field, search button) are visible upon launch.</td>
                    <td>toHaveTitle(), toHaveText(), toBeVisible().</td>
                </tr>
                <tr>
                    <td>Searching for a valid city...</td>
                    <td>Positive Test Case. Validates successful data fetch and correct data display (Â°C, Humidity, Wind).</td>
                    <td>page.fill(), page.click(), toContainText().</td>
                </tr>
                <tr>
                    <td>Searching for an invalid city...</td>
                    <td>Negative Test Case. Ensures the application correctly displays the error message (/City not found/) and hides the weather display.</td>
                    <td>toContainText(), toBeHidden().</td>
                </tr>
                <tr>
                    <td>Recent searches are saved...</td>
                    <td>State Management Test. Clears localStorage and validates that up to three recent cities are stored and ordered correctly (LIFO).</td>
                    <td>page.evaluate(() => localStorage.clear()), toHaveCount(), toHaveText().</td>
                </tr>
                <tr>
                    <td>Clicking a saved recent city...</td>
                    <td>Interaction/Regression Test. Ensures recent buttons are interactive and trigger the correct city data reload.</td>
                    <td>page.click(locator), Assertion on #cityName.</td>
                </tr>
            </tbody>
        </table>
        <p><strong>B. Demonstrating Gray Box Capabilities</strong></p>
        <p>The <strong>Recent searches are saved...</strong> test utilizes Gray Box techniques by using Playwright's ability to manipulate the browser environment via <strong>page.evaluate(() => localStorage.clear());</strong>. This ensures the test is independent and starts from a clean, known state, a critical best practice in automation.</p>
    </div>

    <div class="section-title">
        <span>Continuous Integration (CI) Pipeline</span>
    </div>
    <div class="content">
        <p>A robust CI workflow was implemented using GitHub Actions to automate the execution of the Playwright suite on every code push or manual trigger. This ensures immediate feedback on the stability of the application.</p>
        <p><strong>A. CI Workflow </strong>(.github/workflows/playwright.yml)</p>
        <p>The workflow is configured to execute the tests against a locally served instance of the application within the CI runner, ensuring reliable and isolated execution. The key steps include:</p>
        <ul class="list">
            <li><strong>Repository Separation:</strong> The automation suite is isolated from the application code, mimicking a professional environment where development and QA codebases are separate.</li>
            <li><strong>Local Serving:</strong> The application is hosted locally on the runner using <strong>npx serve</strong> to create a stable <strong>http://localhost:3000</strong> environment for testing.</li>
            <li><strong>Dependency Management:</strong> Includes explicit steps to set up Node.js and install Playwright browser dependencies.</li>
            <li><strong>Artifact Upload:</strong> The workflow is configured to store the Playwright Report, which provides detailed HTML results, traces, and screenshots for debugging any failures.</li>
        </ul>
        <p><strong>B. Successful Execution Summary</strong></p>
        <p>The entire suite of five End-to-End tests executed successfully, confirming the functional stability of all core user interaction paths, including:</p>
        <ul class="list dotted">
            <li>-The visual integrity of the initial page load.</li>
            <li>-The primary functionality of fetching and displaying weather data.</li>
            <li>-The error handling for negative inputs.</li>
            <li>-The state management of the recent cities feature.</li>
        </ul>
    </div>

    <div class="section-title">
        <span>Conclusion</span>
    </div>
    <div class="content">
        <p>The successful implementation and execution of this Playwright E2E suite demonstrate proficiency in establishing a powerful, low-maintenance regression safety net for the Weather Tracker App.</p>
    </div>

    <div class="allProj">
        <a href="../">Back to Projects</a>
    </div>

    <div id="blackOverlay">
        <div id="contactModal">
            <span class="contactTitle">Contact Information</span>
            <div class="contactLine">
                <img src="../../assets/email.png" alt="">
                <span>sjovencd@gmail.com</span>
                <button onclick="copyToClipboard(this)"><img src="../../assets/copy.png" alt=""></button>
            </div>
            <div class="contactLine">
                <img src="../../assets/telephone.png" alt="">
                <span>+63 929 343 0291</span>
                <button onclick="copyToClipboard(this)"><img src="../../assets/copy.png" alt=""></button>
            </div>
            <button class="closeBtn" onclick="document.getElementById('blackOverlay').style.display='none'">
                Close
            </button>
        </div>
    </div>

    <div id="toast"></div>
    <script src="../../scipts/contact.js"></script>
    <script>
        document.querySelectorAll(".contactLine button").forEach(button => {
            button.addEventListener("click", () => {
                const textToCopy = button.parentElement.querySelector("span").innerText;
                navigator.clipboard.writeText(textToCopy).then(() => {
                    showToast(`Copied: ${textToCopy}`);
                }).catch(err => {
                    console.error("Failed to copy: ", err);
                });
            });
        });

        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }
    </script>
</body>
</html>